trigger:
  branches:
    include:
      - main
  paths:
    include:
      - src
      - tests
      - build
      - .github

pool:
  vmImage: 'ubuntu-22.04'

pr: none

variables:
- group: SDLC-SM-HighCode-CI

resources:
  repositories:
    - repository: rd-ai-azure-pipeline-templates
      type: github
      ref: refs/tags/v5
      name: OutSystems/rd-ai-azure-pipeline-templates
      endpoint: OutSystems

jobs:
  - template: python/packages/new-azure-pipeline.yml@rd-ai-azure-pipeline-templates
    parameters:
      PackageName: 'mcp-python-sdk'
      SonarCloudProject: 'mcp-python-sdk'
      SonarCloudExclusionList: 'tests/**/*'
      SonarCloudCoverageExclusionList: "'tests/**/*, local_dev/*'"
      SkipIntegrationTests: true
      PythonVersion: 3.12
